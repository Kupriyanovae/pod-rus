window = {
	name = "character_creator_window"
	size = { 550 470 }
	position = { 610 100 }
	layer = middle

	visible = "[And(Or(Not(IsObserver), GetPlayer.IsValid), GetPlayer.MakeScope.GetVariable('character_creator_points').IsSet)]"
	datacontext = "[GetPlayer]"

	using = Window_Background
	using = Window_Decoration
	using = Animation_ShowHide_Standard

	state = {
		name = _show
		using = Animation_FadeIn_Quick
		
		on_start = "[GetScriptedGui('character_creator_window_start').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
	}

	state = {
		name = _hide
		using = Animation_FadeOut_Quick
	}
	
	state = {
		name = _pause

		trigger_when = "[Not(IsGamePaused)]"
		on_start = "[OnPause]"
	}
	
	vbox = {
		using = Window_Margins
		restrictparent_min = yes

		header_pattern = {
			layoutpolicy_horizontal = expanding

			blockoverride "header_text"
			{
				text = "CHARACTER_CREATOR_WINDOW_TITLE"
			}

			blockoverride "button_close"
			{
				onclick = "[GetScriptedGui('character_creator_window_open').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
			}
		}

		vbox = {
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding

			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 15 15 }
				spacing = 10

				background = {
					using = Background_Area
				}

				scrollbox = {
					name = "characters_scroll_area"
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					minimumsize = { 150 -1 }

					blockoverride "scrollbox_content" {
						text_label_center = {
							text = "CHARACTER_CREATOR_WINDOW_CHOOSE_NEW"
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "CHARACTER_CREATOR_WINDOW_GENDER_FEMALE_CHANCE"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_sex_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_sex_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_sex').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_sex_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_sex_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_sex_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "RULER_DESIGNER_AGE_LABEL"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_age_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_age_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_age').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_age_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_age_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_age_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "diplomacy"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_diplomacy_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_diplomacy_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_diplomacy').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_diplomacy_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_diplomacy_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_diplomacy_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "martial"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_martial_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_martial_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_martial').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_martial_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_martial_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_martial_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "stewardship"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_stewardship_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_stewardship_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_stewardship').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_stewardship_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_stewardship_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_stewardship_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "intrigue"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_intrigue_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_intrigue_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_intrigue').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_intrigue_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_intrigue_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_intrigue_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "learning"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_learning_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_learning_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_learning').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_learning_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_learning_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_learning_reset' )]"
							}
						}
					
						hbox = {
							layoutpolicy_horizontal = expanding
							spacing = 10
							text_label_left = {
								text = "prowess"
							}
							expand = {}
							button_character_creator_double_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_prowess_double_subtract' )]"
							}
							button_character_creator_subtract = {
								datacontext = "[GetScriptedGui( 'character_creator_prowess_subtract' )]"
							}
							text_label_center = {
								min_width = 20
								raw_text = "[Character.MakeScope.GetVariable('character_creator_prowess').GetValue|V0]"
							}
							button_character_creator_add = {
								datacontext = "[GetScriptedGui( 'character_creator_prowess_add' )]"
							}
							button_character_creator_double_add = {
								datacontext = "[GetScriptedGui( 'character_creator_prowess_double_add' )]"
							}
							button_character_creator_reset = {
								datacontext = "[GetScriptedGui( 'character_creator_prowess_reset' )]"
							}
						}
						
						text_label_center = {
							text = "CHARACTER_CREATOR_WINDOW_POINTS"
						}
					}
				}
			}

			vbox = {
				name = "footer"
				layoutpolicy_horizontal = expanding
				spacing = 10
				margin_bottom = 12

				hbox = {
					name = "control_buttons"
					spacing = 20

					button_standard = {
						name = "close_button"
						onclick = "[GetScriptedGui('trait_change_window_open').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
						text = "CANCEL"
						using = tooltip_above
					}

					button_primary = {
						name = "enact_button"
						datacontext = "[GetScriptedGui( 'character_creator_window_enact' )]"
						enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
						onclick = "[ScriptedGui.Execute(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"

						text = "CHARACTER_CREATOR_WINDOW_CHANGE"

						using = tooltip_above
						tooltip = "[ScriptedGui.BuildTooltip(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
					}
				}
			}
		}
	}
}

types Buttons
{
    type button_character_creator_double_subtract = button_select_arrow
	{	
		size = { 20 20 }
		texture = "gfx/interface/icons/flat_icons/select_arrow_left_double.dds"
		enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot(Character.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(Character.MakeScope).End)]"
	}
    type button_character_creator_subtract = button_select_arrow
	{	
		size = { 20 20 }
		mirror = horizontal
		enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot(Character.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(Character.MakeScope).End)]"
	}
    type button_character_creator_add = button_select_arrow
	{	
		size = { 20 20 }
		enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot(Character.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(Character.MakeScope).End)]"
	}
    type button_character_creator_double_add = button_select_arrow
	{	
		size = { 20 20 }
		texture = "gfx/interface/icons/flat_icons/select_arrow_double.dds"
		enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot(Character.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(Character.MakeScope).End)]"
	}
    type button_character_creator_reset = button_replace
	{	
		size = { 20 20 }
		enabled = "[ScriptedGui.IsValid(GuiScope.SetRoot(Character.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(Character.MakeScope).End)]"
	}
}